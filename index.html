<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Triathlon Calc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #0f1216;
      --panel: #171b21;
      --accent: #3a86ff;
      --text: #e9edf3;
      --muted: #9aa4b2;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: Inter, Arial, sans-serif; background: var(--bg); color: var(--text); }
    nav { background: var(--panel); border-bottom: 1px solid #222; display: flex; gap: 16px; padding: 12px 16px; position: sticky; top: 0; }
    nav a { color: var(--text); text-decoration: none; padding: 8px 10px; border-radius: 8px; }
    nav a.active { background: var(--accent); color: white; }
    main { max-width: 980px; margin: 24px auto; padding: 0 16px; }
    .tab { display: none; }
    .tab.active { display: block; }
    h2 { margin: 0 0 16px; font-size: 22px; }
    .card { background: var(--panel); border: 1px solid #222; border-radius: 12px; padding: 16px; }
    fieldset { border: 1px solid #2a2f37; border-radius: 10px; padding: 12px; margin: 0 0 12px; }
    legend { padding: 0 6px; color: var(--muted); font-size: 12px; }
    label { display: grid; grid-template-columns: 140px 1fr; align-items: center; gap: 12px; margin: 8px 0; }
    input[type="number"], input[type="text"] {
      width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #2a2f37;
      background: #12161b; color: var(--text); outline: none;
    }
    .activeBtn { background: #22c55e; color: white; }
    input:focus { border-color: var(--accent); }
    .btn { display: inline-block; padding: 10px 14px; border-radius: 10px; border: 0;
      background: var(--accent); color: white; font-weight: 600; cursor: pointer; }
    .btn.secondary { background: #2c3340; color: var(--text); }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .result { margin-top: 12px; padding: 12px; border-radius: 10px; background: #12161b; border: 1px solid #2a2f37; }
    .muted { color: var(--muted); font-size: 12px; }
    @media (max-width: 720px) {
      label { grid-template-columns: 1fr; gap: 6px; }
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <nav>
    <a href="#" id="tab-run" class="active" onclick="showTab('run')">üèÉ –ë–µ–≥</a>
    <a href="#" id="tab-bike" onclick="showTab('bike')">üö¥ –í–µ–ª–æ—Å–∏–ø–µ–¥</a>
    <a href="#" id="tab-swim" onclick="showTab('swim')">üèä –ü–ª–∞–≤–∞–Ω–∏–µ</a>
  </nav>

  <main>
    <!-- –ë–µ–≥ -->
    <section id="run" class="tab active">
      <div class="card">
        <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –±–µ–≥–∞ ‚Äî —Ç–µ–º–ø ‚Üî –¥–∏—Å—Ç–∞–Ω—Ü–∏—è ‚Üî –≤—Ä–µ–º—è</h2>

        <div class="grid">
          <fieldset>
            <legend>–î–∏—Å—Ç–∞–Ω—Ü–∏—è</legend>
            <label>
              <span>–ö–∏–ª–æ–º–µ—Ç—Ä—ã</span>
              <input type="number" id="runDistance" step="0.1" min="0">
            </label>
          </fieldset>

          <fieldset>
            <legend>–¢–µ–º–ø (–º–∏–Ω/–∫–º)</legend>
            <label>
              <span>–§–æ—Ä–º–∞—Ç -:--</span>
              <div style="display:flex;align-items:center;gap:4px;">
                <input type="number" id="runPaceM" min="0" style="width:60px;" placeholder="6">
                <span>:</span>
                <input type="number" id="runPaceS" min="0" max="59" style="width:60px;" placeholder="30">
              </div>
            </label>
            <p class="muted">–¢–µ–º–ø –Ω–∞ –∫–º, –Ω–∞–ø—Ä–∏–º–µ—Ä 5:45</p>
          </fieldset>
        </div>

        <fieldset>
          <legend>–û–±—â–µ–µ –≤—Ä–µ–º—è</legend>
          <label><span>–ß–∞—Å—ã</span><input type="number" id="runTimeH" min="0"></label>
          <label><span>–ú–∏–Ω—É—Ç—ã</span><input type="number" id="runTimeM" min="0" max="59"></label>
          <label><span>–°–µ–∫—É–Ω–¥—ã</span><input type="number" id="runTimeS" min="0" max="59"></label>
        </fieldset>

        <div style="display:flex; gap:8px; margin-top:8px;">
          <button class="btn" type="button" onclick="calcRun()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
          <button class="btn secondary" type="button" onclick="clearRun()">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>

        <button id="intervalBtn" class="btn secondary" onclick="toggleIntervals()">–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã</button>
        
        <div id="runResult" class="result"></div>
      </div>
    </section>

    <!-- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã -->
    <section id="intervalsBlock" class="tab" style="display:none;">
      <div class="card">
        <h3>–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>
        <button class="btn" type="button" onclick="addInterval()">–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª</button>
        <div id="intervalList"></div>
        <button class="btn" type="button" onclick="calcIntervals()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</button>
        <div id="intervalResult" class="result"></div>
      </div>
    </section>

    <!-- –í–µ–ª–æ—Å–∏–ø–µ–¥ -->
    <section id="bike" class="tab">
      <div class="card">
        <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞</h2>
        <p class="muted">–ó–¥–µ—Å—å –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º —Å–∫–æ—Ä–æ—Å—Ç—å ‚Üî –¥–∏—Å—Ç–∞–Ω—Ü–∏—è ‚Üî –≤—Ä–µ–º—è –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã.</p>
      </div>
    </section>

    <!-- –ü–ª–∞–≤–∞–Ω–∏–µ -->
    <section id="swim" class="tab">
      <div class="card">
        <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –ø–ª–∞–≤–∞–Ω–∏—è</h2>
        <p class="muted">–ó–¥–µ—Å—å –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º —Ç–µ–º–ø (–º–∏–Ω/100 –º), –¥–ª–∏–Ω—É –±–∞—Å—Å–µ–π–Ω–∞ –∏ —Å–µ—Ä–∏–∏.</p>
      </div>
    </section>
  </main>

  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      document.getElementById('tab-' + tabId).classList.add('active');
    }

    function toMinutes(h, m, s) {
      h = Number(h) || 0;
      m = Number(m) || 0;
      s = Number(s) || 0;
      return h * 60 + m + s / 60;
    }

    let intervalMode = false;
    let intervalCount = 0;

    function toggleIntervals() {
      intervalMode = !intervalMode;
      const baseCalc = document.getElementById('run');
      const intervals = document.getElementById('intervalsBlock');
      const list = document.getElementById('intervalList');
      if (intervalMode) {
        baseCalc.style.display = "none";
        intervals.style.display = "block";
        list.innerHTML = "";
        intervalCount = 0;
        addInterval();
        addInterval();
      } else {
        baseCalc.style.display = "block";
        intervals.style.display = "none";
      }
    }

function addInterval() {
  intervalCount++;
  const container = document.getElementById('intervalList');
  const block = document.createElement('div');
  block.className = "card";
  block.style.marginTop = "10px";
  block.innerHTML = `
    <h4>–ò–Ω—Ç–µ—Ä–≤–∞–ª ${intervalCount}</h4>
    <label>–î–∏—Å—Ç–∞–Ω—Ü–∏—è (–∫–º): <input type="number" step="0.1" min="0" class="intDistance"></label><br>
    <label>–¢–µ–º–ø (–º–∏–Ω/–∫–º): <input type="text" class="intPace" placeholder="5:00"></label><br>
    <label>–í—Ä–µ–º—è (–º–∏–Ω): <input type="number" min="0" class="intTime"></label><br>
    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: <input type="text" class="intComment" placeholder="–ü—É–ª—å—Å/–∑–∞–º–µ—Ç–∫–∞"></label><br>
    <button class="btn secondary" type="button" onclick="this.parentElement.remove()">–£–¥–∞–ª–∏—Ç—å</button>
  `;
  container.appendChild(block);
}

function calcIntervals() {
  const distances = document.querySelectorAll('.intDistance');
  const paces = document.querySelectorAll('.intPace');
  const times = document.querySelectorAll('.intTime');
  const comments = document.querySelectorAll('.intComment');

  let totalDist = 0;
  let totalTime = 0;

  let table = "<table border='1' style='width:100%;border-collapse:collapse;text-align:center;'><tr><th>–ò–Ω—Ç–µ—Ä–≤–∞–ª</th><th>–î–∏—Å—Ç–∞–Ω—Ü–∏—è (–∫–º)</th><th>–¢–µ–º–ø</th><th>–í—Ä–µ–º—è (–º–∏–Ω)</th><th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th></tr>";

  for (let i = 0; i < distances.length; i++) {
    const dist = parseFloat(distances[i].value) || 0;
    const pace = paces[i].value;
    const time = parseFloat(times[i].value) || 0;
    const comment = comments[i].value;

    totalDist += dist;
    totalTime += time;

    table += `<tr>
      <td>${i+1}</td>
      <td>${dist}</td>
      <td>${pace}</td>
      <td>${time}</td>
      <td>${comment}</td>
    </tr>`;
  }

  table += `<tr style="font-weight:bold;">
    <td>–ò—Ç–æ–≥–æ</td>
    <td>${totalDist.toFixed(2)}</td>
    <td>-</td>
    <td>${totalTime.toFixed(1)}</td>
    <td></td>
  </tr>`;

  table += "</table>";
  document.getElementById('intervalResult').innerHTML = table;
}
          container.appendChild(block);
    }

  

